# Entity type â†’ API mapping for terminology grounding
#
# routing_rules: maps entity type names to a list of API names to query.
# Use `skip: true` for entity types that should not be grounded.
#
# api_configs: defines how each API is accessed.
# - source: "direct_api" uses direct NLM REST API calls via httpx (RxNorm, ICD-10, LOINC, HPO)
# - source: "direct_python" uses direct Python import (UMLS, SNOMED)

routing_rules:
  Medication:
    - rxnorm
    - umls

  Condition:
    - icd10
    - snomed
    - umls

  Lab_Value:
    - loinc
    - umls

  Biomarker:
    - hpo
    - umls

  Procedure:
    - umls
    - snomed

  Phenotype:
    - hpo
    - umls

  Demographic:
    skip: true  # Demographics not grounded to terminology (no relevant UMLS CUIs)

api_configs:
  rxnorm:
    source: direct_api

  icd10:
    source: direct_api

  loinc:
    source: direct_api

  hpo:
    source: direct_api

  umls:
    source: direct_python
    module: "umls_mcp_server.umls_api"

  snomed:
    source: direct_python
    module: "grounding_service.umls_client"
