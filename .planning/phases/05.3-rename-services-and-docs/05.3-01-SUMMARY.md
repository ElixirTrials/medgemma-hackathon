---
phase: 05.3
plan: 01
subsystem: infrastructure
tags: [refactor, rename, documentation]
dependency_graph:
  requires: [05.2-03]
  provides: [extraction-service-renamed]
  affects: [all-services-importing-agent-a, docs, infra]
tech_stack:
  added: []
  patterns: [workspace-rename, git-mv-preservation]
key_files:
  created:
    - services/extraction-service/ (renamed from agent-a-service)
  modified:
    - pyproject.toml (workspace members, mypy config, pythonpath, coverage)
    - services/api-service/src/api_service/main.py
    - services/api-service/tests/test_schemas.py
    - services/api-service/pyproject.toml
    - infra/docker-compose.yml (agent-a -> extraction)
    - scripts/check-all.sh
    - .github/workflows/ci.yml
    - mkdocs.yml
    - services/extraction-service/README.md
    - services/extraction-service/mkdocs.yml
    - services/extraction-service/docs/api/index.md
decisions:
  - Used git mv to preserve history during directory rename
  - Renamed Docker service from agent-a to extraction for clarity
  - Updated README to describe actual Gemini criteria extraction workflow
metrics:
  duration: 6 min
  tasks: 6
  commits: 6
  files_changed: 35
  completed: 2026-02-11
---

# Phase 5.3 Plan 01: Rename agent-a-service to extraction-service Summary

Renamed agent-a-service to extraction-service throughout the codebase to match its actual purpose of criteria extraction using Google Gemini.

## What Was Done

Systematically renamed agent-a-service to extraction-service across all references:

1. **Directory and Package Rename** (commit 024e8fc)
   - Used `git mv` to rename service directory preserving git history
   - Renamed Python package from agent_a_service to extraction_service
   - Updated pyproject.toml name, packages config, and coverage settings

2. **Internal Imports Update** (commit 12ffa76)
   - Updated all imports within extraction-service from agent_a_service to extraction_service
   - Updated files: trigger.py, schemas/__init__.py, all node files

3. **API Service References** (commit 029f7c3)
   - Updated imports in main.py and test_schemas.py
   - Updated pythonpath in api-service pyproject.toml
   - Updated README.md code example

4. **Root and Infrastructure** (commit 94c96f8)
   - Updated workspace members in root pyproject.toml
   - Updated mypy overrides, pythonpath, and coverage source paths
   - Renamed Docker service from agent-a to extraction in docker-compose.yml
   - Updated check-all.sh and ci.yml mypy commands
   - Updated mkdocs.yml navigation entry

5. **Documentation Update** (commit 8238fd7)
   - Updated mkdocs.yml site_name to extraction-service
   - Updated API reference title
   - Rewrote README to describe criteria extraction workflow with Gemini

6. **Verification and Fixes** (commit 7aa6016)
   - Fixed test import (agent_a_service -> extraction_service)
   - Updated pdf_parser docstring
   - Verified tests pass (5/5 passing)
   - Verified mypy runs without new errors

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 1 - Bug] Fixed test import breaking test collection**
- **Found during:** Task 6 (verification)
- **Issue:** Test file still imported from agent_a_service, causing ModuleNotFoundError
- **Fix:** Updated test_extraction_graph.py import to extraction_service
- **Files modified:** services/extraction-service/tests/test_extraction_graph.py
- **Commit:** 7aa6016 (bundled with Task 6)

**2. [Rule 3 - Blocking] Updated pdf_parser docstring**
- **Found during:** Task 6 (verification)
- **Issue:** Docstring still referenced "agent-a-service" which would be misleading
- **Fix:** Updated module docstring to reference "extraction-service"
- **Files modified:** services/extraction-service/src/extraction_service/pdf_parser.py
- **Commit:** 7aa6016 (bundled with Task 6)

## Verification

- ✅ extraction-service tests: 5/5 passing
- ✅ api-service tests: 91/98 passing (7 failures pre-existing, unrelated to rename)
- ✅ mypy: No new errors related to rename (only pre-existing events_py/inference type stubs)
- ✅ All agent_a_service imports successfully replaced
- ✅ Git history preserved through git mv

## Remaining References

Documentation files still reference agent-a/agent_a_service (to be updated in plan 05.3-03):
- docs/components-overview.md
- docs/onboarding.md
- PROJECT_OVERVIEW.md
- .github/copilot-instructions.md

## Self-Check: PASSED

**Files created:**
- ✅ services/extraction-service/ exists (renamed from agent-a-service)
- ✅ services/extraction-service/src/extraction_service/ exists
- ✅ services/extraction-service/tests/test_extraction_graph.py exists

**Commits exist:**
- ✅ 024e8fc: refactor(05.3-01): rename agent-a-service to extraction-service
- ✅ 12ffa76: refactor(05.3-01): update internal imports to extraction_service
- ✅ 029f7c3: refactor(05.3-01): update api-service references to extraction_service
- ✅ 94c96f8: refactor(05.3-01): update root and infra references to extraction-service
- ✅ 8238fd7: docs(05.3-01): update extraction-service documentation
- ✅ 7aa6016: fix(05.3-01): update pdf_parser docstring and fix test import
